# PersonalQuantAssistant - 项目架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                    PersonalQuantAssistant                        │
│                  个人AI量化金融分析师系统                          │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                        Web界面层 (Streamlit)                     │
├─────────────────────────────────────────────────────────────────┤
│  📈 总览面板  │  🔍 品种分析  │  🎯 策略信号  │  ⚠️ 风险管理  │ ⚙️ 设置 │
└────────┬────────────────┬────────────┬────────────┬─────────────┘
         │                │            │            │
         ▼                ▼            ▼            ▼
┌─────────────────────────────────────────────────────────────────┐
│                          应用逻辑层                               │
├──────────────────┬──────────────────┬──────────────────────────┤
│   策略模块        │   分析引擎         │   风险管理               │
│                  │                   │                          │
│ • ETF策略        │ • 技术分析         │ • 风险计算               │
│ • 加密货币策略    │ • 市场状态         │ • 警报系统               │
│ • 组合策略        │ • 信号生成         │ • 止损机制               │
│ • 仓位管理        │                   │                          │
│ • 回测引擎        │                   │                          │
└────────┬─────────┴──────────┬────────┴─────────┬───────────────┘
         │                    │                  │
         ▼                    ▼                  ▼
┌─────────────────────────────────────────────────────────────────┐
│                          数据层                                   │
├──────────────────┬──────────────────┬──────────────────────────┤
│   数据获取        │   数据管理         │   数据存储               │
│                  │                   │                          │
│ • 股票数据        │ • 数据清洗         │ • SQLite数据库           │
│ • 加密货币数据    │ • 缓存管理         │ • 文件缓存               │
│ • 美股数据        │ • 数据验证         │ • 内存缓存               │
└────────┬─────────┴──────────┬────────┴─────────┬───────────────┘
         │                    │                  │
         ▼                    ▼                  ▼
┌─────────────────────────────────────────────────────────────────┐
│                        外部数据源                                 │
├──────────────────┬──────────────────┬──────────────────────────┤
│   AKShare        │   CoinGecko       │   yfinance              │
│   (A股/ETF)      │   (加密货币)       │   (美股)                │
└──────────────────┴──────────────────┴──────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                         基础设施层                                │
├──────────────────┬──────────────────┬──────────────────────────┤
│   配置管理        │   日志系统         │   工具函数               │
│                  │                   │                          │
│ • config.yaml    │ • Loguru          │ • 可视化工具             │
│ • api_keys.yaml  │ • 日志轮转         │ • 报告生成               │
│ • 配置加载器      │ • 多级别日志       │ • 辅助函数               │
└──────────────────┴──────────────────┴──────────────────────────┘

══════════════════════════════════════════════════════════════════

                           数据流向图

    用户输入 ──> Web界面 ──> 应用逻辑 ──> 数据层 ──> 外部API
                   │         │          │         │
                   │         │          │         │
    用户展示 <── 可视化 <── 分析结果 <── 数据处理 <── API响应

══════════════════════════════════════════════════════════════════

                         核心功能模块

┌─────────────────────────────────────────────────────────────────┐
│ 1. 数据获取 (data_fetcher)                                        │
│    ├── stock_data.py        # 股票/ETF数据获取                   │
│    ├── crypto_data.py       # 加密货币数据获取                   │
│    ├── data_manager.py      # 统一数据管理接口                   │
│    └── database.py          # 数据库操作封装                     │
├─────────────────────────────────────────────────────────────────┤
│ 2. 技术分析 (analysis)                                            │
│    ├── technical_analyzer.py # 技术指标计算                      │
│    ├── market_status.py      # 市场状态判断                      │
│    └── signals.py            # 交易信号生成                      │
├─────────────────────────────────────────────────────────────────┤
│ 3. 投资策略 (strategy)                                            │
│    ├── etf_strategy.py       # ETF投资策略                       │
│    ├── crypto_strategy.py    # 加密货币策略                      │
│    ├── portfolio_strategy.py # 组合管理策略                      │
│    ├── position_manager.py   # 仓位管理                          │
│    └── backtest_engine.py    # 回测引擎                          │
├─────────────────────────────────────────────────────────────────┤
│ 4. 风险管理 (risk_management)                                     │
│    ├── risk_calculator.py    # 风险指标计算                      │
│    ├── alert_system.py       # 警报系统                          │
│    └── stop_loss.py          # 止损止盈机制                      │
├─────────────────────────────────────────────────────────────────┤
│ 5. 工具函数 (utils)                                               │
│    ├── config_loader.py      # 配置加载 ✅                       │
│    ├── logger.py             # 日志管理 ✅                       │
│    ├── visualization.py      # 数据可视化                        │
│    └── report_generator.py   # 报告生成器                        │
└─────────────────────────────────────────────────────────────────┘

══════════════════════════════════════════════════════════════════

                       技术栈一览

┌─────────────────┬──────────────────────────────────────────────┐
│ 前端展示         │ Streamlit, Plotly, Matplotlib                │
├─────────────────┼──────────────────────────────────────────────┤
│ 数据处理         │ Pandas, NumPy, pandas-ta                     │
├─────────────────┼──────────────────────────────────────────────┤
│ 数据源           │ AKShare, yfinance, CoinGecko                 │
├─────────────────┼──────────────────────────────────────────────┤
│ 数据存储         │ SQLite, DiskCache                            │
├─────────────────┼──────────────────────────────────────────────┤
│ 任务调度         │ APScheduler                                  │
├─────────────────┼──────────────────────────────────────────────┤
│ 日志系统         │ Loguru                                       │
├─────────────────┼──────────────────────────────────────────────┤
│ 配置管理         │ PyYAML, Pydantic                             │
├─────────────────┼──────────────────────────────────────────────┤
│ 测试框架         │ Pytest                                       │
└─────────────────┴──────────────────────────────────────────────┘

══════════════════════════════════════════════════════════════════

                        开发进度

    ┌───────────────────────────────────────────────────────┐
    │ 阶段一：架构搭建          ████████████████ 100% ✅      │
    │ 阶段二：数据获取          ░░░░░░░░░░░░░░░░   0%  🔜     │
    │ 阶段三：技术分析          ░░░░░░░░░░░░░░░░   0%  ⏸️     │
    │ 阶段四：投资策略          ░░░░░░░░░░░░░░░░   0%  ⏸️     │
    │ 阶段五：风险管理          ░░░░░░░░░░░░░░░░   0%  ⏸️     │
    │ 阶段六：界面完善          ░░░░░░░░░░░░░░░░   0%  ⏸️     │
    │ 阶段七：部署优化          ░░░░░░░░░░░░░░░░   0%  ⏸️     │
    └───────────────────────────────────────────────────────┘

    总体进度: ██░░░░░░░░░░░░░░░░░░ 14.3%

══════════════════════════════════════════════════════════════════
```

## 系统特点

### 🎯 核心优势
1. **模块化设计** - 各模块独立，易于维护和扩展
2. **高度可配置** - 通过YAML文件灵活配置所有参数
3. **多数据源** - 支持多个数据提供商，提高可靠性
4. **完整的风险管理** - 内置止损、仓位控制等功能
5. **友好的界面** - 基于Streamlit的现代化Web界面

### 💡 设计理念
- **简单优先** - 先实现核心功能，再优化细节
- **可扩展性** - 易于添加新的资产类型和策略
- **安全第一** - API密钥安全管理，数据验证
- **性能优化** - 缓存机制，向量化计算
- **用户友好** - 清晰的界面，详细的文档

### 🔒 安全考虑
- API密钥单独管理
- 配置文件不提交到Git
- 输入验证和异常处理
- 日志记录所有重要操作

### 📈 扩展性
- 易于添加新的数据源
- 易于添加新的技术指标
- 易于添加新的投资策略
- 支持自定义配置参数

---

**准备开始第二阶段开发？** 🚀

查看 `PROJECT_STATUS.md` 了解详细的下一步计划！
